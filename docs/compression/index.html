<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>Compression | JSON-RPC API server for Laravel framework</title>


<meta name="title" content="Compression | JSON-RPC API server for Laravel framework">
<meta name="description" content="Compress JSON files to reduce file size, get lower download times and save website bandwidth.">





<meta property="og:type" content="website">
<meta property="og:url" content="https://sajya.github.io/docs/compression"/>
<meta property="og:locale" content="en"/>
<meta property="og:title" content="Compression | JSON-RPC API server for Laravel framework"/>
<meta property="og:description" content="Compress JSON files to reduce file size, get lower download times and save website bandwidth.">
<meta property="og:image" content="https://github.com/orchidsoftware/art/raw/master/orchid-share.jpg">


<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:url" content="https://sajya.github.io/docs/compression">
<meta name="twitter:title" content="Compression | JSON-RPC API server for Laravel framework">
<meta name="twitter:description" content="Compress JSON files to reduce file size, get lower download times and save website bandwidth.">
<meta name="twitter:image" content="https://github.com/orchidsoftware/art/raw/master/orchid-share.jpg">

    <meta name="google-site-verification" content="CezCm3VnIMolzHC65_TaI0DMhs4fJv2A7fWTPJrnp9s" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#8ea8af">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#ffffff">

    
    <link rel="home" href="https://sajya.github.io">

    <link rel="stylesheet" href="/css/app.css?id=17673e5074987be1a72572ac9c2460f4">
</head>

<body>

    <div class="p-2 bg-body-tertiary2 footer-secondary">
        <div class="container">
            <ul class="nav col-12 ms-auto mb-2 justify-content-center mb-md-0">
                <li><a href="/" class="nav-link px-3 text-secondary">Home</a></li>
                <li><a href="/docs" class="nav-link px-3 text-secondary">Docs</a></li>
                <li><a href="https://github.com/sajya" class="nav-link px-3 text-secondary">GitHub</a></li>
            </ul>
        </div>
    </div>


<div class="bg-gray">
    <div class="container">

        <div class="d-md-flex flex-md-equal w-100">
            <div class="bg-body-tertiary2 pt-3 px-3 py-md-3 px-md-5 text-center overflow-hidden w-100">
                <div class="my-3 p-3">
                    <h1 class="display-5 w-75 mx-auto">
                        Compression
                    </h1>

                            <div class="d-flex">
                             <a href="https://github.com/sajya/sajya.github.io/edit/master/docs/compression.md" class="mx-auto d-none d-md-flex align-items-center text-decoration-none text-nowrap small"
                               title="View and edit this file on GitHub" target="_blank" rel="noopener"
                            >
                                <svg class="me-2" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32" fill="currentColor">
                                    <path d="M30.133 1.552c-1.090-1.044-2.291-1.573-3.574-1.573-2.006 0-3.47 1.296-3.87 1.693-0.564 0.558-19.786 19.788-19.786 19.788-0.126 0.126-0.217 0.284-0.264 0.456-0.433 1.602-2.605 8.71-2.627 8.782-0.112 0.364-0.012 0.761 0.256 1.029 0.193 0.192 0.45 0.295 0.713 0.295 0.104 0 0.208-0.016 0.31-0.049 0.073-0.024 7.41-2.395 8.618-2.756 0.159-0.048 0.305-0.134 0.423-0.251 0.763-0.754 18.691-18.483 19.881-19.712 1.231-1.268 1.843-2.59 1.819-3.925-0.025-1.319-0.664-2.589-1.901-3.776zM22.37 4.87c0.509 0.123 1.711 0.527 2.938 1.765 1.24 1.251 1.575 2.681 1.638 3.007-3.932 3.912-12.983 12.867-16.551 16.396-0.329-0.767-0.862-1.692-1.719-2.555-1.046-1.054-2.111-1.649-2.932-1.984 3.531-3.532 12.753-12.757 16.625-16.628zM4.387 23.186c0.55 0.146 1.691 0.57 2.854 1.742 0.896 0.904 1.319 1.9 1.509 2.508-1.39 0.447-4.434 1.497-6.367 2.121 0.573-1.886 1.541-4.822 2.004-6.371zM28.763 7.824c-0.041 0.042-0.109 0.11-0.19 0.192-0.316-0.814-0.87-1.86-1.831-2.828-0.981-0.989-1.976-1.572-2.773-1.917 0.068-0.067 0.12-0.12 0.141-0.14 0.114-0.113 1.153-1.106 2.447-1.106 0.745 0 1.477 0.34 2.175 1.010 0.828 0.795 1.256 1.579 1.27 2.331 0.014 0.768-0.404 1.595-1.24 2.458z"></path>
                                </svg>
                                Suggest edit
                            </a>
                        </div>
                </div>
            </div>
        </div>

    </div>
</div>


<div class="documentation position-relative mb-5 mt-md-4 overflow-hidden">
    <div class="container position-relative" id="docs">
        <div class="row g-0 m-0 px-0 rounded-3 overflow-hidden">

            <div class="col-12 col-md-auto bg-grey py-md-3 ms-md-auto">
                <nav class="nav-docs px-md-5 py-2 px-3">
            <h4 class="font-weight-normal my-md-3 my-2 me-2 me-md-0 d-none d-md-inline-block text-secondary">Prologue</h4>

        <ul>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs" class="text-decoration-none ">
                        Introduction
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/specification" class="text-decoration-none ">
                        Specification
                    </a>
                </li>
                    </ul>
            <h4 class="font-weight-normal my-md-3 my-2 me-2 me-md-0 d-none d-md-inline-block text-secondary">Getting Started</h4>

        <ul>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/installation" class="text-decoration-none ">
                        Installation
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/quickstart" class="text-decoration-none ">
                        Quick Start
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/notifications" class="text-decoration-none ">
                        Notifications
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/batch" class="text-decoration-none ">
                        Batch
                    </a>
                </li>
                    </ul>
            <h4 class="font-weight-normal my-md-3 my-2 me-2 me-md-0 d-none d-md-inline-block text-secondary">Application</h4>

        <ul>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/authentication" class="text-decoration-none ">
                        Authentication
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/requests" class="text-decoration-none ">
                        Validation and Data
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/errors" class="text-decoration-none ">
                        Error Handling
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/binding" class="text-decoration-none ">
                        Binding
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/testing" class="text-decoration-none ">
                        Testing
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/proxy" class="text-decoration-none ">
                        Proxy
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/security" class="text-decoration-none ">
                        Security
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 border-secondary active-doc-menu">
                    <a href="/docs/compression" class="text-decoration-none text-secondary">
                        Compression
                    </a>
                </li>
                    </ul>
            <h4 class="font-weight-normal my-md-3 my-2 me-2 me-md-0 d-none d-md-inline-block text-secondary">Other Usage</h4>

        <ul>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/basic-application" class="text-decoration-none ">
                        Basic Application
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/api-docs-generator" class="text-decoration-none ">
                        Docs Generator
                    </a>
                </li>
                            <li class="border-start border-3 px-2 px-md-3 py-1 ">
                    <a href="/docs/client" class="text-decoration-none ">
                        HTTP Client
                    </a>
                </li>
                    </ul>
    </nav>
            </div>
            <div class="col-12 col-md-auto me-auto bg-white py-md-3">
                <main class="py-2 px-3 py-md-4 px-md-4 ms-md-4 me-md-auto order-md-first overflow-auto">
                    <body><h2><a href='#middleware-for-gzip' id='middleware-for-gzip'>Middleware for gzip</a></h2>
<p>Many services use <code>JSON</code> for messaging due to its human-readable data and smaller size compared to <code>XML</code>. But it also has its own problems, one of which is the file size compared to binary formats. On a small amount of data, the transfer and decryption speed will be almost invisible in almost any format, but with an increase in the volume, the load on the network can greatly increase.</p>
<hr>
<p>Of course, if the service data is consumed directly by web browsers, this amount will be difficult to achieve. But when transferring data between servers, for more optimization, you can use compression, for example, <a href="https://en.wikipedia.org/wiki/Gzip">gzip</a>.</p>
<p><picture alt='Compression reduces file size and makes it faster to transmit over the network.'><img src="/img/compress.svg" alt="Compression reduces file size and makes it faster to transmit over the network."></picture></p>
<p>In order for application responses to be compressed, it is enough to put <code>GzipCompress</code> as the middleware:</p>
<pre><code class="language-php">use Sajya\Server\Middleware\GzipCompress;

Route::rpc('/v1/endpoint', [TennisProcedure::class])
    -&gt;middleware(GzipCompress::class)
    -&gt;name('rpc.endpoint');
</code></pre>
<p>After that, we can easily check this with curl:</p>
<pre><code class="language-bash">curl 'http://127.0.0.1:8001/api/v1/endpoint' --data-binary '{"jsonrpc":"2.0","method":"tennis@ping","id":1}' -H "Accept-Encoding: gzip" --output -
</code></pre>
<p>An approximate result would be:</p>
<pre><code class="language-bash">Accept-Encoding: gzip"  --output -
�V�LQ�R2T�Q*J-.�)r
��ҁ�������d�����R-��*%      
</code></pre>
<p>Don&rsquo;t worry if you are confused by such symbols. It&rsquo;s okay, so the compression is working.</p>
<blockquote>
<p><strong>Note.</strong> If the request does not contain a header about data acceptance in the gzip format <code>Accept-Encoding: gzip</code>, an uncompressed response will be returned.</p>
</blockquote>
</body>                </main>
            </div>
        </div>
    </div>
</div>




    <div class="bg-gray">
        <div class="container">
            <footer class="d-flex flex-wrap justify-content-between align-items-center py-4 border-top">
                <p class="col-md-4 mb-0 text-body-secondary">
                    <small class="text-muted">Package and documentation licensed <a href="https://github.com/sajya/server/blob/master/LICENSE.md" class="text-body-secondary">MIT</a>.</small>
                </p>

                <ul class="nav col-md-4 justify-content-end d-none d-md-flex">
                    <li class="nav-item"><a href="https://www.jsonrpc.org/specification" class="nav-link px-2 text-body-secondary" target="_blank">Specification</a></li>
                    <li class="nav-item"><a href="http://www.json.org" class="nav-link px-2 text-body-secondary" target="_blank"> What is JSON?</a></li>
                    <li class="nav-item"><a href="http://en.wikipedia.org/wiki/Remote_procedure_call" class="nav-link px-2 text-body-secondary" target="_blank"> What is RPC?</a></li>
                </ul>
            </footer>
        </div>
    </div>

<script src="/js/app.js?id=1cab8abf484910fe694cdf46cffd4186"></script>

<!-- Insert analytics code here -->
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://cdn.jsdelivr.net/npm/yandex-metrica-watch/tag.js", "ym");

        ym(61197199, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/61197199" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-39757298-6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-39757298-6');
   </script>

</body>
</html>
